let my_wishlist="",p_wl="",profile_email="",accountname=jsnomeLoja,sl="81638c30-59d9-4960-af67-9e333474a5c2",class_item=".product-item__wishlist__trigger",class_pdp=".product-detail__add-to-wishlist";function init_wishlist(){$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(i){i.length?(my_wishlist=JSON.parse(i[0].wishlistProducts),p_wl=Object.keys(my_wishlist).length,$("#total-wishlist-items").html(p_wl),$("#wishlist-wrapper").length&&(0==p_wl&&$("#whislist-no-items").show(),$("#wishlist-wrapper").html('<div id="wl-container"></div>'),load_wishlist(),setTimeout(function(){get_total_wishlist()},2e3),$(".sideMenu a").each(function(){var i=$(this).attr("href");-1!=i.indexOf("?")&&(i=i.substring(0,i.indexOf("?")),$(this).attr("href",i))})),$("body.produto").length&&(console.log("PDP"),console.log(my_wishlist),i=$("#___rc-p-id").val(),null!=my_wishlist["p"+i]?$(class_pdp).addClass("active"):console.log("not in wishlist"))):$("#wishlist-wrapper").length&&($("#whislist-no-items").show(),$(".sideMenu a").each(function(){var i=$(this).attr("href");-1!=i.indexOf("?")&&(i=i.substring(0,i.indexOf("?")),$(this).attr("href",i))}))}),$("body").on("click",class_pdp,function(i){i.preventDefault();var t=$(this),i=$("#___rc-p-id").val();t.hasClass("active")?update_wishlist(i,"remove"):update_wishlist(i,"add")}),$("body").on("click",class_item,function(i){i.preventDefault(),console.log(i);var t=$(this);console.log(t);i=t.attr("data-id");t.hasClass("active")?(console.log("Remove"),update_wishlist(i,"remove")):(console.log("Add"),update_wishlist(i,"add"))}),$(class_item).not(".checked").each(function(){var i=$(this),t=i.attr("data-id");i.addClass("checked"),is_in_wishlist(t)}),$(document).ajaxComplete(function(i,t,e){-1!=e.url.indexOf("/buscapagina")&&$(class_item).not(".checked").each(function(){var i=$(this),t=i.attr("data-id");i.addClass("checked"),is_in_wishlist(t)})})}function load_wishlist(){$.each(my_wishlist,function(i,t){$("#wl-container").addClass("product-list list-view grid-small").append('<div id="wl-wrapper-'+t.id+'" class="wl-wrapper"></div>'),load_product_wl(t.id)})}function load_product_wl(s){$.ajax({url:"/buscapagina?fq=productId:"+s+"&sl="+sl+"&cc=1&sm=0",success:function(i,t,e){0==e.responseText.length&&update_wishlist(s,"remove"),i.length&&(i=$(i).find('>ul:first-child>li:not(".helperComplement")'),$("#wl-wrapper-"+s).html(i),sameHeight())}})}function get_total_wishlist(){""!=profile_email&&$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(i){i.length?(my_wishlist=JSON.parse(i[0].wishlistProducts),p_wl=Object.keys(my_wishlist).length,$("#total-wishlist").html(p_wl)):$("#total-wishlist").html("0")})}function update_wishlist(s,l){""!=profile_email&&$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(i){var t;i.length?(my_wishlist=JSON.parse(i[0].wishlistProducts),"remove"==l?(delete my_wishlist["p"+s],t=JSON.stringify(my_wishlist)):"add"==l&&((e={})["p"+s]={id:s},$.extend(my_wishlist,e),t=JSON.stringify(my_wishlist))):((e={})["p"+s]={id:s},t=JSON.stringify(e));var e={};e.email=profile_email,e.wishlistProducts=t,$.ajax({accept:"application/vnd.vtex.ds.v10 json",contentType:"application/json; charset=utf-8",crossDomain:!0,data:JSON.stringify(e),type:"PUT",url:"/api/dataentities/WL/documents",success:function(i){"remove"==l?($(class_pdp).removeClass("active"),$(class_item+'[data-id="'+s+'"]').removeClass("active"),-1!=window.location.href.indexOf("account/wishlist")&&$("#wl-wrapper-"+s).slideUp(500,function(){$(this).remove()})):($(class_pdp).addClass("active"),$(class_item+'[data-id="'+s+'"]').addClass("active")),get_total_wishlist()}})})}function is_in_wishlist(t){$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(i){i.length&&(my_wishlist=JSON.parse(i[0].wishlistProducts),void 0!==my_wishlist["p"+t]&&$(class_item+'[data-id="'+t+'"]').addClass("active"))})}function load_add_to_cart_wishlist(){$("body").off("click",".wishlist__shelf-item-buy:not(.adding)").on("click",".wishlist__shelf-item-buy",function(i){i.preventDefault();var t=$(this),i=t.closest(".wishlist__shelf-item-action"),e=t.attr("data-skuid"),i=i.find(".wishlist__shelf-item-qty-input").val();$.ajax({url:"/checkout/cart/add?sku="+e+"&qty="+i+"&seller=1&redirect=false&sc=1",beforeSend:function(){t.addClass("adding")},success:function(i){console.log(i),vtexjs.checkout.getOrderForm().done(function(i){crearCarritoLightBox(i,e)}),t.removeClass("adding")}})}),$("body").on("change",".wishlist__shelf-item-qty-input",function(){var i=parseInt($(this).val());(i<=0||isNaN(i))&&$(this).val(1)}),$("body").on("click",".wishlist__shelf-item-qty-rest",function(i){i.preventDefault();var t=$(this).parent().find(".wishlist__shelf-item-qty-input"),i=parseInt(t.val());isNaN(i)||i<=1?t.val(1):t.val(--i)}),$("body").on("click",".wishlist__shelf-item-qty-plus",function(i){i.preventDefault();var t=$(this).parent().find(".wishlist__shelf-item-qty-input"),e=parseInt(t.val()),i=parseInt(t.attr("data-neeeded"));isNaN(e)?t.val(1):(e++,console.log(e,i),t.val(e=i<e?i:e))})}!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(h){function p(i){return f.raw?i:encodeURIComponent(i)}function u(i,t){i=f.raw?i:function(i){0===i.indexOf('"')&&(i=i.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return i=decodeURIComponent(i.replace(e," ")),f.json?JSON.parse(i):i}catch(i){}}(i);return h.isFunction(t)?t(i):i}var e=/\+/g,f=h.cookie=function(i,t,e){var s,l;if(1<arguments.length&&!h.isFunction(t))return"number"==typeof(e=h.extend({},f.defaults,e)).expires&&(l=e.expires,(s=e.expires=new Date).setMilliseconds(s.getMilliseconds()+864e5*l)),document.cookie=[p(i),"=",(l=t,p(f.json?JSON.stringify(l):String(l))),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("");for(var a=i?void 0:{},n=document.cookie?document.cookie.split("; "):[],o=0,c=n.length;o<c;o++){var r=n[o].split("="),d=(d=r.shift(),f.raw?d:decodeURIComponent(d)),r=r.join("=");if(i===d){a=u(r,t);break}i||void 0===(r=u(r))||(a[d]=r)}return a};f.defaults={},h.removeCookie=function(i,t){return h.cookie(i,"",h.extend({},t,{expires:-1})),!h.cookie(i)}}),$(function(){vtexid.setScope("2384422b-df02-41e4-b38f-037b5a69b331"),vtexid.setScopeName(jsnomeSite),vtexjs.checkout.getOrderForm().done(function(i){null!=i.clientProfileData&&null!=i.clientProfileData.email&&i.loggedIn?(profile_email=i.clientProfileData.email,init_wishlist()):($("#total-wishlist-items").hide(),$("body").on("click",class_item+", "+class_pdp,function(i){i.preventDefault(),vtexid.start({locale:"es-MX",forceReload:!1}),$("html,body").animate({scrollTop:0},"slow")}))}),-1!=window.location.href.indexOf("account/wishlist")&&load_add_to_cart_wishlist()});